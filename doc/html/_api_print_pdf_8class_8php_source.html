<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>FreeApiPrint: V:/sd/api_print/www/trunk/public/ApiPrintPdf.class.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">FreeApiPrint&#160;<span id="projectnumber">1.0.0</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">V:/sd/api_print/www/trunk/public/ApiPrintPdf.class.php</div>  </div>
</div>
<div class="contents">
<a href="_api_print_pdf_8class_8php.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00002"></a>00002 <span class="preprocessor">#</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span><span class="preprocessor"># Copyright (c) 2011, Leblanc Simon &lt;contact@leblanc-simon.eu&gt;</span>
<a name="l00004"></a>00004 <span class="preprocessor"></span><span class="preprocessor"># All rights reserved.</span>
<a name="l00005"></a>00005 <span class="preprocessor"></span><span class="preprocessor"># </span>
<a name="l00006"></a>00006 <span class="preprocessor"></span><span class="preprocessor"># Redistribution and use in source and binary forms, with or without modification,</span>
<a name="l00007"></a>00007 <span class="preprocessor"></span><span class="preprocessor"># are permitted provided that the following conditions are met:</span>
<a name="l00008"></a>00008 <span class="preprocessor"></span><span class="preprocessor"># </span>
<a name="l00009"></a>00009 <span class="preprocessor"></span><span class="preprocessor"># Redistributions of source code must retain the above copyright notice, this</span>
<a name="l00010"></a>00010 <span class="preprocessor"></span><span class="preprocessor"># list of conditions and the following disclaimer.</span>
<a name="l00011"></a>00011 <span class="preprocessor"></span><span class="preprocessor"># Redistributions in binary form must reproduce the above copyright notice, this</span>
<a name="l00012"></a>00012 <span class="preprocessor"></span><span class="preprocessor"># list of conditions and the following disclaimer in the documentation and/or</span>
<a name="l00013"></a>00013 <span class="preprocessor"></span><span class="preprocessor"># other materials provided with the distribution.</span>
<a name="l00014"></a>00014 <span class="preprocessor"></span><span class="preprocessor"># </span>
<a name="l00015"></a>00015 <span class="preprocessor"></span><span class="preprocessor"># THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot;</span>
<a name="l00016"></a>00016 <span class="preprocessor"></span><span class="preprocessor"># AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</span>
<a name="l00017"></a>00017 <span class="preprocessor"></span><span class="preprocessor"># IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE</span>
<a name="l00018"></a>00018 <span class="preprocessor"></span><span class="preprocessor"># DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE</span>
<a name="l00019"></a>00019 <span class="preprocessor"></span><span class="preprocessor"># FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span><span class="preprocessor"># DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span><span class="preprocessor"># SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span><span class="preprocessor"># CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,</span>
<a name="l00023"></a>00023 <span class="preprocessor"></span><span class="preprocessor"># OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span>
<a name="l00024"></a>00024 <span class="preprocessor"></span><span class="preprocessor"># OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00025"></a>00025 <span class="preprocessor"></span><span class="preprocessor">#</span>
<a name="l00026"></a>00026 <span class="preprocessor"></span>
<a name="l00049"></a><a class="code" href="class_api_print_pdf.html">00049</a> <span class="keyword">class </span><a class="code" href="class_api_print_pdf.html">ApiPrintPdf</a>
<a name="l00050"></a>00050 {
<a name="l00056"></a><a class="code" href="class_api_print_pdf.html#adcbf0ca9a669202a5b499758dba7d7cd">00056</a>   <span class="keyword">private</span> <a class="code" href="class_api_print_pdf.html#adcbf0ca9a669202a5b499758dba7d7cd">$service</a>  = null;
<a name="l00057"></a>00057   
<a name="l00063"></a><a class="code" href="class_api_print_pdf.html#a11deb61bb04aab8e49024cc4e590ba2f">00063</a>   <span class="keyword">private</span> <a class="code" href="class_api_print_pdf.html#a11deb61bb04aab8e49024cc4e590ba2f">$email</a>    = null;
<a name="l00064"></a>00064   
<a name="l00070"></a><a class="code" href="class_api_print_pdf.html#ad54e2a7b792ca52c083e82342a29bcca">00070</a>   <span class="keyword">private</span> <a class="code" href="class_api_print_pdf.html#ad54e2a7b792ca52c083e82342a29bcca">$api_key</a>  = null;
<a name="l00071"></a>00071   
<a name="l00077"></a><a class="code" href="class_api_print_pdf.html#ac7a079742a263675ed90a43ca3a736dd">00077</a>   <span class="keyword">private</span> <a class="code" href="class_api_print_pdf.html#ac7a079742a263675ed90a43ca3a736dd">$url</a>      = null;
<a name="l00078"></a>00078   
<a name="l00084"></a><a class="code" href="class_api_print_pdf.html#a6ee0337d1e38b3d231db443b7f4d17e9">00084</a>   <span class="keyword">private</span> <a class="code" href="class_api_print_pdf.html#a6ee0337d1e38b3d231db443b7f4d17e9">$content</a>  = null;
<a name="l00085"></a>00085   
<a name="l00091"></a><a class="code" href="class_api_print_pdf.html#ace814e1fbf758b83886177909a3d8c76">00091</a>   <span class="keyword">private</span> <a class="code" href="class_api_print_pdf.html#ace814e1fbf758b83886177909a3d8c76">$options</a>  = null;
<a name="l00092"></a>00092   
<a name="l00093"></a>00093   
<a name="l00099"></a><a class="code" href="class_api_print_pdf.html#aebe07d4e0a09ac425db7d3a4db77eeea">00099</a>   <span class="keyword">private</span> <a class="code" href="class_api_print_pdf.html#aebe07d4e0a09ac425db7d3a4db77eeea">$errors</a>   = array();
<a name="l00100"></a>00100   
<a name="l00101"></a>00101   
<a name="l00107"></a><a class="code" href="class_api_print_pdf.html#a7c037feb74ba024823888bf9278d4ef3">00107</a>   <span class="keyword">private</span> <a class="code" href="class_api_print_pdf.html#a7c037feb74ba024823888bf9278d4ef3">$pdf</a>      = null;
<a name="l00108"></a>00108   
<a name="l00109"></a>00109   
<a name="l00110"></a>00110   
<a name="l00122"></a><a class="code" href="class_api_print_pdf.html#ac17f3a187ba616f33f131093cf51494a">00122</a>   <span class="keyword">public</span> function <a class="code" href="class_api_print_pdf.html#ac17f3a187ba616f33f131093cf51494a">__contruct</a>(<a class="code" href="class_api_print_pdf.html#adcbf0ca9a669202a5b499758dba7d7cd">$service</a> = null, <a class="code" href="class_api_print_pdf.html#a11deb61bb04aab8e49024cc4e590ba2f">$email</a> = null, <a class="code" href="class_api_print_pdf.html#ad54e2a7b792ca52c083e82342a29bcca">$api_key</a> = null, <a class="code" href="class_api_print_pdf.html#ac7a079742a263675ed90a43ca3a736dd">$url</a> = null, <a class="code" href="class_api_print_pdf.html#a6ee0337d1e38b3d231db443b7f4d17e9">$content</a> = null)
<a name="l00123"></a>00123   {
<a name="l00124"></a>00124     <span class="keywordflow">if</span> (<a class="code" href="class_api_print_pdf.html#a11deb61bb04aab8e49024cc4e590ba2f">$email</a> !== null) {
<a name="l00125"></a>00125       $this-&gt;<a class="code" href="class_api_print_pdf.html#aabf6c9f8ec64a24b0a189eefa7938116">setEmail</a>(<a class="code" href="class_api_print_pdf.html#a11deb61bb04aab8e49024cc4e590ba2f">$email</a>);
<a name="l00126"></a>00126     }
<a name="l00127"></a>00127     <span class="keywordflow">if</span> (<a class="code" href="class_api_print_pdf.html#ad54e2a7b792ca52c083e82342a29bcca">$api_key</a> !== null) {
<a name="l00128"></a>00128       $this-&gt;<a class="code" href="class_api_print_pdf.html#a7029218fbe6b3a416d242147503cf0fd">setApiKey</a>(<a class="code" href="class_api_print_pdf.html#ad54e2a7b792ca52c083e82342a29bcca">$api_key</a>);
<a name="l00129"></a>00129     }
<a name="l00130"></a>00130     <span class="keywordflow">if</span> (<a class="code" href="class_api_print_pdf.html#ac7a079742a263675ed90a43ca3a736dd">$url</a> !== null) {
<a name="l00131"></a>00131       $this-&gt;<a class="code" href="class_api_print_pdf.html#a547275611365b45f1eb12ee1d70aa8fd">setUrl</a>(<a class="code" href="class_api_print_pdf.html#ac7a079742a263675ed90a43ca3a736dd">$url</a>);
<a name="l00132"></a>00132     }
<a name="l00133"></a>00133     <span class="keywordflow">if</span> (<a class="code" href="class_api_print_pdf.html#a6ee0337d1e38b3d231db443b7f4d17e9">$content</a> !== null) {
<a name="l00134"></a>00134       $this-&gt;<a class="code" href="class_api_print_pdf.html#ab957c7cc63367569d87caf06709cc8eb">setContent</a>(<a class="code" href="class_api_print_pdf.html#a6ee0337d1e38b3d231db443b7f4d17e9">$content</a>);
<a name="l00135"></a>00135     }
<a name="l00136"></a>00136   }
<a name="l00137"></a>00137   
<a name="l00138"></a>00138   
<a name="l00146"></a><a class="code" href="class_api_print_pdf.html#a2f7886a8bd5fc981dde2a2aaafff1522">00146</a>   <span class="keyword">public</span> function <a class="code" href="class_api_print_pdf.html#a2f7886a8bd5fc981dde2a2aaafff1522">callApi</a>()
<a name="l00147"></a>00147   {
<a name="l00148"></a>00148     <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="class_api_print_pdf.html#a97613abc8b5962d820d4b2d447003987">checkBeforeCall</a>() === <span class="keyword">false</span>) {
<a name="l00149"></a>00149       <span class="keywordflow">return</span> $this-&gt;errors;
<a name="l00150"></a>00150     }
<a name="l00151"></a>00151     
<a name="l00152"></a>00152     $input = array();
<a name="l00153"></a>00153     <span class="keywordflow">if</span> ($this-&gt;url !== null) {
<a name="l00154"></a>00154       $input[<span class="stringliteral">&#39;url&#39;</span>] = $this-&gt;url;
<a name="l00155"></a>00155     } elseif ($this-&gt;content !== null) {
<a name="l00156"></a>00156       $input[<span class="stringliteral">&#39;content&#39;</span>] = $this-&gt;content;
<a name="l00157"></a>00157     }
<a name="l00158"></a>00158     
<a name="l00159"></a>00159     <span class="keywordflow">if</span> ($this-&gt;options !== null) {
<a name="l00160"></a>00160       <span class="keywordflow">foreach</span> ($this-&gt;options as $key =&gt; $value) {
<a name="l00161"></a>00161         $input[<span class="stringliteral">&#39;options[&#39;</span>.$key.<span class="charliteral">&#39;]&#39;</span>] = (is_bool($value) === <span class="keyword">true</span>) ? (<span class="keywordtype">int</span>)$value : $value;
<a name="l00162"></a>00162       }
<a name="l00163"></a>00163     }
<a name="l00164"></a>00164     
<a name="l00165"></a>00165     $curl = curl_init();
<a name="l00166"></a>00166     
<a name="l00167"></a>00167     curl_setopt($curl, CURLOPT_URL, $this-&gt;service);
<a name="l00168"></a>00168     
<a name="l00169"></a>00169     curl_setopt($curl, CURLOPT_HEADER, <span class="keyword">false</span>);
<a name="l00170"></a>00170     curl_setopt($curl, CURLOPT_POST, <span class="keyword">true</span>);
<a name="l00171"></a>00171     curl_setopt($curl, CURLOPT_RETURNTRANSFER, <span class="keyword">true</span>);
<a name="l00172"></a>00172     curl_setopt($curl, CURLOPT_FOLLOWLOCATION, <span class="keyword">true</span>);
<a name="l00173"></a>00173     
<a name="l00174"></a>00174     curl_setopt($curl, CURLOPT_HTTPHEADER, array(<span class="stringliteral">&#39;X-Api-Email: &#39;</span>.$this-&gt;email, <span class="stringliteral">&#39;X-Api-Token: &#39;</span>.$this-&gt;api_key));
<a name="l00175"></a>00175     
<a name="l00176"></a>00176     curl_setopt($curl, CURLOPT_POST, <span class="keyword">true</span>);
<a name="l00177"></a>00177     curl_setopt($curl, CURLOPT_POSTFIELDS, $input);
<a name="l00178"></a>00178     
<a name="l00179"></a>00179     curl_setopt($curl, CURLOPT_USERAGENT, <span class="stringliteral">&#39;ApiPrintPdf&#39;</span>);
<a name="l00180"></a>00180     
<a name="l00181"></a>00181     <a class="code" href="index_8php.html#af4b6fb1bbc77ccc05f10da3b16935b99">$response</a>       = curl_exec($curl);
<a name="l00182"></a>00182     $headers        = curl_getinfo($curl);
<a name="l00183"></a>00183     $error_number   = curl_errno($curl);
<a name="l00184"></a>00184     $error_message  = curl_error($curl);
<a name="l00185"></a>00185     
<a name="l00186"></a>00186     curl_close($curl);
<a name="l00187"></a>00187     
<a name="l00188"></a>00188     <span class="keywordflow">if</span> ($error_number === 0 &amp;&amp; $headers[<span class="stringliteral">&#39;http_code&#39;</span>] === 200) {
<a name="l00189"></a>00189       $this-&gt;pdf = <a class="code" href="index_8php.html#af4b6fb1bbc77ccc05f10da3b16935b99">$response</a>;
<a name="l00190"></a>00190       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00191"></a>00191     } <span class="keywordflow">else</span> {
<a name="l00192"></a>00192       $this-&gt;errors[] = <a class="code" href="index_8php.html#af4b6fb1bbc77ccc05f10da3b16935b99">$response</a>;
<a name="l00193"></a>00193       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00194"></a>00194     }
<a name="l00195"></a>00195   }
<a name="l00196"></a>00196   
<a name="l00197"></a>00197   
<a name="l00205"></a><a class="code" href="class_api_print_pdf.html#a23c2583d9816b5118a136b2b1687202d">00205</a>   <span class="keyword">public</span> function <a class="code" href="class_api_print_pdf.html#a23c2583d9816b5118a136b2b1687202d">download</a>($filename = <span class="stringliteral">&#39;api_print.pdf&#39;</span>)
<a name="l00206"></a>00206   {
<a name="l00207"></a>00207     header(<span class="stringliteral">&#39;Content-type: application/force-download&#39;</span>);
<a name="l00208"></a>00208     header(<span class="stringliteral">&#39;Content-disposition: attachment; filename=&quot;&#39;</span>.str_replace(<span class="charliteral">&#39;&quot;&#39;</span>, <span class="stringliteral">&quot;&#39;&quot;</span>, $filename).<span class="charliteral">&#39;&quot;&#39;</span>);
<a name="l00209"></a>00209     header(<span class="stringliteral">&#39;Content-Transfer-Encoding: application/octet-stream&#39;</span>);
<a name="l00210"></a>00210     header(<span class="stringliteral">&#39;Content-Length:&#39;</span>.mb_strlen($this-&gt;pdf));
<a name="l00211"></a>00211     header(<span class="stringliteral">&#39;Pragma: no-cache&#39;</span>);
<a name="l00212"></a>00212     header(<span class="stringliteral">&#39;Cache-Control: must-revalidate, post-check=0, pre-check=0, public&#39;</span>);
<a name="l00213"></a>00213     header(<span class="stringliteral">&#39;Expires: 0&#39;</span>);
<a name="l00214"></a>00214     die($this-&gt;pdf);
<a name="l00215"></a>00215   }
<a name="l00216"></a>00216   
<a name="l00217"></a>00217   
<a name="l00226"></a><a class="code" href="class_api_print_pdf.html#a1bad44ba269909d4409faa6b08e8799d">00226</a>   <span class="keyword">public</span> function <a class="code" href="class_api_print_pdf.html#a1bad44ba269909d4409faa6b08e8799d">save</a>($filename)
<a name="l00227"></a>00227   {
<a name="l00228"></a>00228     <span class="keywordflow">if</span> (file_put_contents($filename, $this-&gt;pdf) === <span class="keyword">false</span>) {
<a name="l00229"></a>00229       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00230"></a>00230     }
<a name="l00231"></a>00231     
<a name="l00232"></a>00232     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00233"></a>00233   }
<a name="l00234"></a>00234   
<a name="l00235"></a>00235   
<a name="l00243"></a><a class="code" href="class_api_print_pdf.html#a7a09f7a5b7dc81a191cfa323fadf9245">00243</a>   <span class="keyword">public</span> function <a class="code" href="class_api_print_pdf.html#a7a09f7a5b7dc81a191cfa323fadf9245">getErrors</a>()
<a name="l00244"></a>00244   {
<a name="l00245"></a>00245     <span class="keywordflow">return</span> $this-&gt;errors;
<a name="l00246"></a>00246   }
<a name="l00247"></a>00247   
<a name="l00248"></a>00248   
<a name="l00256"></a><a class="code" href="class_api_print_pdf.html#ac6e67dc672a6a641b1ca5bfb33ada7b1">00256</a>   <span class="keyword">public</span> function <a class="code" href="class_api_print_pdf.html#ac6e67dc672a6a641b1ca5bfb33ada7b1">setService</a>(<a class="code" href="class_api_print_pdf.html#adcbf0ca9a669202a5b499758dba7d7cd">$service</a>)
<a name="l00257"></a>00257   {
<a name="l00258"></a>00258     $this-&gt;service = <a class="code" href="class_api_print_pdf.html#adcbf0ca9a669202a5b499758dba7d7cd">$service</a>;
<a name="l00259"></a>00259   }
<a name="l00260"></a>00260   
<a name="l00261"></a>00261   
<a name="l00269"></a><a class="code" href="class_api_print_pdf.html#aabf6c9f8ec64a24b0a189eefa7938116">00269</a>   <span class="keyword">public</span> function <a class="code" href="class_api_print_pdf.html#aabf6c9f8ec64a24b0a189eefa7938116">setEmail</a>(<a class="code" href="class_api_print_pdf.html#a11deb61bb04aab8e49024cc4e590ba2f">$email</a>)
<a name="l00270"></a>00270   {
<a name="l00271"></a>00271     $this-&gt;email = <a class="code" href="class_api_print_pdf.html#a11deb61bb04aab8e49024cc4e590ba2f">$email</a>;
<a name="l00272"></a>00272   }
<a name="l00273"></a>00273   
<a name="l00274"></a>00274   
<a name="l00282"></a><a class="code" href="class_api_print_pdf.html#a7029218fbe6b3a416d242147503cf0fd">00282</a>   <span class="keyword">public</span> function <a class="code" href="class_api_print_pdf.html#a7029218fbe6b3a416d242147503cf0fd">setApiKey</a>(<a class="code" href="class_api_print_pdf.html#ad54e2a7b792ca52c083e82342a29bcca">$api_key</a>)
<a name="l00283"></a>00283   {
<a name="l00284"></a>00284     $this-&gt;api_key = <a class="code" href="class_api_print_pdf.html#ad54e2a7b792ca52c083e82342a29bcca">$api_key</a>;
<a name="l00285"></a>00285   }
<a name="l00286"></a>00286   
<a name="l00287"></a>00287   
<a name="l00295"></a><a class="code" href="class_api_print_pdf.html#a547275611365b45f1eb12ee1d70aa8fd">00295</a>   <span class="keyword">public</span> function <a class="code" href="class_api_print_pdf.html#a547275611365b45f1eb12ee1d70aa8fd">setUrl</a>(<a class="code" href="class_api_print_pdf.html#ac7a079742a263675ed90a43ca3a736dd">$url</a>)
<a name="l00296"></a>00296   {
<a name="l00297"></a>00297     $this-&gt;url = <a class="code" href="class_api_print_pdf.html#ac7a079742a263675ed90a43ca3a736dd">$url</a>;
<a name="l00298"></a>00298   }
<a name="l00299"></a>00299   
<a name="l00300"></a>00300   
<a name="l00308"></a><a class="code" href="class_api_print_pdf.html#ab957c7cc63367569d87caf06709cc8eb">00308</a>   <span class="keyword">public</span> function <a class="code" href="class_api_print_pdf.html#ab957c7cc63367569d87caf06709cc8eb">setContent</a>(<a class="code" href="class_api_print_pdf.html#a6ee0337d1e38b3d231db443b7f4d17e9">$content</a>)
<a name="l00309"></a>00309   {
<a name="l00310"></a>00310     $this-&gt;content = <a class="code" href="class_api_print_pdf.html#a6ee0337d1e38b3d231db443b7f4d17e9">$content</a>;
<a name="l00311"></a>00311   }
<a name="l00312"></a>00312   
<a name="l00313"></a>00313   
<a name="l00321"></a><a class="code" href="class_api_print_pdf.html#a9b81228422581bf5bab2617432053f6f">00321</a>   <span class="keyword">public</span> function <a class="code" href="class_api_print_pdf.html#a9b81228422581bf5bab2617432053f6f">setOptions</a>(<a class="code" href="class_api_print_pdf.html#ace814e1fbf758b83886177909a3d8c76">$options</a>)
<a name="l00322"></a>00322   {
<a name="l00323"></a>00323     <span class="keywordflow">if</span> (is_array(<a class="code" href="class_api_print_pdf.html#ace814e1fbf758b83886177909a3d8c76">$options</a>) === <span class="keyword">false</span>) {
<a name="l00324"></a>00324       <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&#39;options must be an array&#39;</span>);
<a name="l00325"></a>00325     }
<a name="l00326"></a>00326     
<a name="l00327"></a>00327     $this-&gt;options = <a class="code" href="class_api_print_pdf.html#ace814e1fbf758b83886177909a3d8c76">$options</a>;
<a name="l00328"></a>00328   }
<a name="l00329"></a>00329   
<a name="l00330"></a>00330   
<a name="l00338"></a><a class="code" href="class_api_print_pdf.html#a97613abc8b5962d820d4b2d447003987">00338</a>   <span class="keyword">private</span> function <a class="code" href="class_api_print_pdf.html#a97613abc8b5962d820d4b2d447003987">checkBeforeCall</a>()
<a name="l00339"></a>00339   {
<a name="l00340"></a>00340     $this-&gt;errors = array();
<a name="l00341"></a>00341     $not_null = array(<span class="stringliteral">&#39;service&#39;</span>, <span class="stringliteral">&#39;email&#39;</span>, <span class="stringliteral">&#39;api_key&#39;</span>, );
<a name="l00342"></a>00342     
<a name="l00343"></a>00343     <span class="keywordflow">foreach</span> ($not_null as $check) {
<a name="l00344"></a>00344       <span class="keywordflow">if</span> ($this-&gt;$check === null || empty($this-&gt;$check) === <span class="keyword">true</span>) {
<a name="l00345"></a>00345         $this-&gt;errors[] = $check.<span class="stringliteral">&#39; can\&#39;t be null&#39;</span>;
<a name="l00346"></a>00346       }
<a name="l00347"></a>00347     }
<a name="l00348"></a>00348     
<a name="l00349"></a>00349     <span class="keywordflow">if</span> ($this-&gt;url === null &amp;&amp; $this-&gt;content === null) {
<a name="l00350"></a>00350       $this-&gt;errors[] = <span class="stringliteral">&#39;you must defined url or content&#39;</span>;
<a name="l00351"></a>00351     }
<a name="l00352"></a>00352     
<a name="l00353"></a>00353     <span class="keywordflow">if</span> (count($this-&gt;errors) &gt; 0) {
<a name="l00354"></a>00354       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00355"></a>00355     }
<a name="l00356"></a>00356     
<a name="l00357"></a>00357     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00358"></a>00358   }
<a name="l00359"></a>00359 }
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Jun 30 2011 00:26:01 for FreeApiPrint by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
